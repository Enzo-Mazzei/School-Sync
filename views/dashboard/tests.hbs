<style>
  @import '/stylesheets/pages/tests.css';
  @import '/stylesheets/components/modal.css';
  @import '/stylesheets/components/form.css';
</style>

<div class="tests-container">
  <div class="tests-container__header">
    <div class="tests-container__header-left">
      <span class="tests-container__header-icon material-symbols-outlined">
        sticky_note
      </span>
      <div class="tests-container__header-left-container">
        <h1 class="tests-container__header-title">
          Tests
        </h1>
        <p class="tests-container__header-text">{{result}} result(s) found</p>
      </div>
    </div>
  </div>
  <div class="tests-collection">
    <button
        class="tests-container__button tests-container__button-add"
        type="button"
        id="open-modal-button"
      >
      <span class="tests-container__button-icon material-symbols-outlined">
        add
      </span>
    </button>
    {{#each tests}}
      <a href="/dashboard/test/{{_id}}">
        <div class="tests-collection__item">
          <div class="tests-collection__item-container">
            <span class="tests-collection__item-icon material-symbols-outlined">
              quick_reference
            </span>
            <p class="tests-collection__item-title">{{title}}</p>
          </div>
          <div class="tests-collection__item__right">
            <p class="tests-collection__item-createdAt">
              {{dateFormatter createdAt}}
            </p>
            <span class="material-symbols-outlined">
              chevron_right
            </span>
          </div>
        </div>
      </a>
    {{/each}}
  </div>
</div>


<div 
  {{#if errorMessage}}
      class="modal" 
  {{else}}
      class="modal modal__hidden" 
  {{/if}}
>
  <div 
    {{#if errorMessage}}
      class="modal__container" 
    {{else}}
      class="modal__container modal__container-hidden" 
    {{/if}}
  >
    <div class="modal__header">
      <div class="modal__header-container">
        <span class="modal__header-icon material-symbols-outlined">
          library_add
        </span>
        <h2 class="modal__header-title">Add a test</h2>
      </div>
      <span
        class="modal__close material-symbols-outlined"
      >
        close
      </span>
    </div>
    <form
      class="form"
      action="/dashboard/tests/create"
      method="POST"
    >
      <label for="">Title
        <span class="form-require">*</span>
      </label>
      <input
        class="form-input"
        type="text"
        name="title"
        placeholder="Enter test title"
        value="{{title}}"
      />
      <label for="">Max score
        <span class="form-require">*</span>
      </label>
      <input
        class="form-input"
        type="number"
        name="maxGrade"
        placeholder="Enter maximum test score"
        value="{{maxGrade}}"
      />
      <label for="">Date
        <span class="form-require">*</span>
      </label>
      <input
        class="form-input"
        type="text"
        name="date"
        onfocus="this.type='date'"
        pattern="\d{4}-\d{2}-\d{2}"
        placeholder="Select test date"
        value="{{date}}"
      />
      <label for="">Comment
        <span class="form-optional">(optional)</span>
      </label>
      <textarea
        class="form-input"
        type="text"
        name="comment"
        placeholder="Enter test comment"
      >{{comment}}</textarea>
      <button class="form-button" type="submit">
        <span class="material-symbols-outlined">
          add
        </span>
        <span> Add</span>
      </button>
      {{#if errorMessage}}
      <p class="form-error-message">
        <span class="form-error__icon material-symbols-outlined">
          error
        </span>
        {{errorMessage}}
      </p>
      {{/if}}
    </form>
  </div>
</div>

<script src="/js/modal.js"></script>